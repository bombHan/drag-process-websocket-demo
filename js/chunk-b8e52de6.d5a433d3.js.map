{"version":3,"sources":["webpack:///./src/views/sku/index.vue?50cc","webpack:///src/views/sku/index.vue","webpack:///./src/views/sku/index.vue?be61","webpack:///./src/views/sku/index.vue","webpack:///./src/views/sku/index.vue?85c3","webpack:///./src/views/sku/index.vue?f464"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","_v","ref","attrs","formData","_l","item","index","key","standardsList","length","on","$event","deleteStandard","_e","span","validator","rule","value","callback","validateName","name","trigger","required","message","model","$$v","$set","trim","expression","child","childIndex","children","deleteStandardValue","addStandardChild","addStandards","columns","goodsList","record","scopedSlots","_u","fn","save","staticRenderFns","data","watch","handler","console","log","val","getSkuList","deep","created","methods","forEach","canAdd","item1","push","newStandard","$message","error","filter","obj","ind","list","flag","valueList","skuList","skuValueList","map","index1","price","cost","stock","setColumns","standardsValueList","arr","number","undefined","rowSpan","title","dataIndex","width","align","customRender","frontColumns","concat","endColumns","$refs","form","validate","valid","component"],"mappings":"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","file":"js/chunk-b8e52de6.d5a433d3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sku\"},[_c('div',{staticStyle:{\"font-weight\":\"bold\",\"margin\":\"20px 0\"}},[_vm._v(\"sku算法-实现商品多规格\")]),_c('a-form-model',{ref:\"form\",attrs:{\"model\":_vm.formData}},[_c('div',{staticClass:\"standard-list\"},[_vm._l((_vm.formData.standardsList),function(item,index){return _c('div',{key:index,staticClass:\"standard\"},[(_vm.formData.standardsList.length > 1)?_c('a-icon',{staticStyle:{\"position\":\"absolute\",\"right\":\"-5px\",\"top\":\"-5px\",\"z-index\":\"99\",\"cursor\":\"pointer\"},attrs:{\"type\":\"close-circle\"},on:{\"click\":function($event){return _vm.deleteStandard(index)}}}):_vm._e(),_c('a-form-model-item',{attrs:{\"label\":\"规格名\",\"label-col\":{ span: 4 },\"wrapper-col\":{ span: 18 },\"rules\":[\n            {\n              validator: function (rule, value, callback) {\n                _vm.validateName(\n                  rule,\n                  value,\n                  callback,\n                  item.name,\n                  index,\n                  _vm.formData.standardsList\n                );\n              },\n              trigger: ['change', 'blur'],\n            },\n            { required: true, message: '请输入规格名' } ],\"prop\":'standardsList.' + index + '.name'}},[_c('a-input',{attrs:{\"placeholder\":\"请输入规格名\"},model:{value:(item.name),callback:function ($$v) {_vm.$set(item, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"item.name\"}})],1),_c('a-row',[_c('a-col',{staticStyle:{\"text-align\":\"right\",\"height\":\"40px\",\"line-height\":\"40px\"},attrs:{\"span\":4}},[_vm._v(\"规格值：\")]),_c('a-col',{staticStyle:{\"display\":\"flex\",\"flex-wrap\":\"wrap\"},attrs:{\"span\":18}},_vm._l((item.children),function(child,childIndex){return _c('div',{key:childIndex,staticStyle:{\"width\":\"25%\",\"position\":\"relative\"}},[(item.children.length > 2)?_c('a-icon',{staticStyle:{\"position\":\"absolute\",\"right\":\"5px\",\"top\":\"0\",\"z-index\":\"99\",\"cursor\":\"pointer\"},attrs:{\"type\":\"close-circle\"},on:{\"click\":function($event){return _vm.deleteStandardValue(index, childIndex)}}}):_vm._e(),_c('a-form-model-item',{attrs:{\"label\":\"规格值\",\"label-col\":{ span: 0 },\"wrapper-col\":{ span: 20 },\"rules\":[\n                  {\n                    validator: function (rule, value, callback) {\n                      _vm.validateName(\n                        rule,\n                        value,\n                        callback,\n                        child.name,\n                        childIndex,\n                        item.children\n                      );\n                    },\n                    trigger: ['change', 'blur'],\n                  },\n                  { required: true, message: '请输入规格值' } ],\"prop\":'standardsList.' +\n                  index +\n                  '.children.' +\n                  childIndex +\n                  '.name'}},[_c('a-input',{attrs:{\"placeholder\":\"请输入规格值\"},model:{value:(child.name),callback:function ($$v) {_vm.$set(child, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"child.name\"}})],1)],1)}),0)],1),_c('a-row',[_c('a-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"span\":4}}),_c('a-col',{attrs:{\"span\":18}},[_c('a-button',{on:{\"click\":function($event){return _vm.addStandardChild(item)}}},[_vm._v(\"添加规格值\")])],1)],1)],1)}),_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addStandards}},[_vm._v(\"添加规格\")])],2),_c('div',{staticClass:\"goods\"},[_c('a-table',{attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.formData.goodsList,\"rowKey\":function (record, index) { return index; },\"pagination\":false,\"bordered\":\"\"},scopedSlots:_vm._u([{key:\"price\",fn:function(key, item, index){return [_c('a-form-model-item',{attrs:{\"label-col\":{ span: 0 },\"wrapper-col\":{ span: 20 },\"rules\":[{ required: true, message: '请输入现价' }],\"prop\":'goodsList.' + index + '.price'}},[_c('a-input-number',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请输入现价\"},model:{value:(_vm.formData.goodsList[index].price),callback:function ($$v) {_vm.$set(_vm.formData.goodsList[index], \"price\", $$v)},expression:\"formData.goodsList[index].price\"}})],1)]}},{key:\"cost\",fn:function(key, item, index){return [_c('a-form-model-item',{attrs:{\"label-col\":{ span: 0 },\"wrapper-col\":{ span: 20 },\"rules\":[{ required: true, message: '请输入成本' }],\"prop\":'goodsList.' + index + '.cost'}},[_c('a-input-number',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请输入成本\"},model:{value:(_vm.formData.goodsList[index].cost),callback:function ($$v) {_vm.$set(_vm.formData.goodsList[index], \"cost\", $$v)},expression:\"formData.goodsList[index].cost\"}})],1)]}},{key:\"stock\",fn:function(key, item, index){return [_c('a-form-model-item',{attrs:{\"label-col\":{ span: 0 },\"wrapper-col\":{ span: 20 },\"rules\":[{ required: true, message: '请输入库存' }],\"prop\":'goodsList.' + index + '.stock'}},[_c('a-input-number',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请输入库存\"},model:{value:(_vm.formData.goodsList[index].stock),callback:function ($$v) {_vm.$set(_vm.formData.goodsList[index], \"stock\", $$v)},expression:\"formData.goodsList[index].stock\"}})],1)]}}])})],1)]),_c('a-button',{staticStyle:{\"position\":\"absolute\",\"right\":\"20px\",\"top\":\"20px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"sku\">\r\n    <div style=\"font-weight: bold; margin: 20px 0\">sku算法-实现商品多规格</div>\r\n    <a-form-model ref=\"form\" :model=\"formData\">\r\n      <div class=\"standard-list\">\r\n        <div\r\n          v-for=\"(item, index) in formData.standardsList\"\r\n          :key=\"index\"\r\n          class=\"standard\"\r\n        >\r\n          <a-icon\r\n            v-if=\"formData.standardsList.length > 1\"\r\n            @click=\"deleteStandard(index)\"\r\n            type=\"close-circle\"\r\n            style=\"\r\n              position: absolute;\r\n              right: -5px;\r\n              top: -5px;\r\n              z-index: 99;\r\n              cursor: pointer;\r\n            \"\r\n          />\r\n          <a-form-model-item\r\n            label=\"规格名\"\r\n            :label-col=\"{ span: 4 }\"\r\n            :wrapper-col=\"{ span: 18 }\"\r\n            :rules=\"[\r\n              {\r\n                validator: (rule, value, callback) => {\r\n                  validateName(\r\n                    rule,\r\n                    value,\r\n                    callback,\r\n                    item.name,\r\n                    index,\r\n                    formData.standardsList\r\n                  );\r\n                },\r\n                trigger: ['change', 'blur'],\r\n              },\r\n              { required: true, message: '请输入规格名' },\r\n            ]\"\r\n            :prop=\"'standardsList.' + index + '.name'\"\r\n          >\r\n            <a-input v-model.trim=\"item.name\" placeholder=\"请输入规格名\" />\r\n            <!-- @blur=\"standardBlur(item.name)\" -->\r\n          </a-form-model-item>\r\n          <a-row>\r\n            <a-col\r\n              :span=\"4\"\r\n              style=\"text-align: right; height: 40px; line-height: 40px\"\r\n              >规格值：</a-col\r\n            >\r\n            <a-col :span=\"18\" style=\"display: flex; flex-wrap: wrap\">\r\n              <div\r\n                v-for=\"(child, childIndex) in item.children\"\r\n                :key=\"childIndex\"\r\n                style=\"width: 25%; position: relative\"\r\n              >\r\n                <a-icon\r\n                  v-if=\"item.children.length > 2\"\r\n                  @click=\"deleteStandardValue(index, childIndex)\"\r\n                  type=\"close-circle\"\r\n                  style=\"\r\n                    position: absolute;\r\n                    right: 5px;\r\n                    top: 0;\r\n                    z-index: 99;\r\n                    cursor: pointer;\r\n                  \"\r\n                />\r\n                <a-form-model-item\r\n                  label=\"规格值\"\r\n                  :label-col=\"{ span: 0 }\"\r\n                  :wrapper-col=\"{ span: 20 }\"\r\n                  :rules=\"[\r\n                    {\r\n                      validator: (rule, value, callback) => {\r\n                        validateName(\r\n                          rule,\r\n                          value,\r\n                          callback,\r\n                          child.name,\r\n                          childIndex,\r\n                          item.children\r\n                        );\r\n                      },\r\n                      trigger: ['change', 'blur'],\r\n                    },\r\n                    { required: true, message: '请输入规格值' },\r\n                  ]\"\r\n                  :prop=\"\r\n                    'standardsList.' +\r\n                    index +\r\n                    '.children.' +\r\n                    childIndex +\r\n                    '.name'\r\n                  \"\r\n                >\r\n                  <a-input\r\n                    v-model.trim=\"child.name\"\r\n                    placeholder=\"请输入规格值\"\r\n                  />\r\n                  <!-- @blur=\"standardValueBlur(child.name, item.children)\" -->\r\n                </a-form-model-item>\r\n              </div>\r\n            </a-col>\r\n          </a-row>\r\n          <a-row>\r\n            <a-col :span=\"4\" style=\"text-align: right\"></a-col>\r\n            <a-col :span=\"18\">\r\n              <a-button @click=\"addStandardChild(item)\">添加规格值</a-button>\r\n            </a-col>\r\n          </a-row>\r\n        </div>\r\n        <a-button @click=\"addStandards\" type=\"primary\">添加规格</a-button>\r\n      </div>\r\n      <div class=\"goods\">\r\n        <a-table\r\n          :columns=\"columns\"\r\n          :dataSource=\"formData.goodsList\"\r\n          :rowKey=\"(record, index) => index\"\r\n          :pagination=\"false\"\r\n          bordered\r\n        >\r\n          <!-- <template\r\n            v-for=\"stand in formData.standardsList\"\r\n            :slot=\"stand.name\"\r\n            slot-scope=\"key, item\"\r\n          >\r\n            {{ item[stand.name] }}\r\n          </template> -->\r\n          <template slot=\"price\" slot-scope=\"key, item, index\">\r\n            <a-form-model-item\r\n              :label-col=\"{ span: 0 }\"\r\n              :wrapper-col=\"{ span: 20 }\"\r\n              :rules=\"[{ required: true, message: '请输入现价' }]\"\r\n              :prop=\"'goodsList.' + index + '.price'\"\r\n            >\r\n              <a-input-number\r\n                v-model=\"formData.goodsList[index].price\"\r\n                placeholder=\"请输入现价\"\r\n                style=\"width:100%\"\r\n              />\r\n            </a-form-model-item>\r\n          </template>\r\n          <template slot=\"cost\" slot-scope=\"key, item, index\">\r\n            <a-form-model-item\r\n              :label-col=\"{ span: 0 }\"\r\n              :wrapper-col=\"{ span: 20 }\"\r\n              :rules=\"[{ required: true, message: '请输入成本' }]\"\r\n              :prop=\"'goodsList.' + index + '.cost'\"\r\n            >\r\n              <a-input-number\r\n                v-model=\"formData.goodsList[index].cost\"\r\n                placeholder=\"请输入成本\"\r\n                style=\"width:100%\"\r\n              />\r\n            </a-form-model-item>\r\n          </template>\r\n          <template slot=\"stock\" slot-scope=\"key, item, index\">\r\n            <a-form-model-item\r\n              :label-col=\"{ span: 0 }\"\r\n              :wrapper-col=\"{ span: 20 }\"\r\n              :rules=\"[{ required: true, message: '请输入库存' }]\"\r\n              :prop=\"'goodsList.' + index + '.stock'\"\r\n            >\r\n              <a-input-number\r\n                v-model=\"formData.goodsList[index].stock\"\r\n                placeholder=\"请输入库存\"\r\n                style=\"width:100%\"\r\n              />\r\n            </a-form-model-item>\r\n          </template>\r\n        </a-table>\r\n      </div>\r\n    </a-form-model>\r\n\r\n    <a-button\r\n      type=\"primary\"\r\n      style=\"position: absolute; right: 20px; top: 20px\"\r\n      @click=\"save\"\r\n      >保存</a-button\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"sku\",\r\n  data() {\r\n    return {\r\n      formData: {\r\n        standardsList: [\r\n          {\r\n            name: \"\",\r\n            children: [{ name: \"\" }, { name: \"\" }],\r\n          },\r\n        ], // 规格列表\r\n        goodsList: [], // 商品列表\r\n      },\r\n      columns: [\r\n        {\r\n          title: \"现价\",\r\n          dataIndex: \"price\",\r\n          scopedSlots: { customRender: \"price\" },\r\n          width: 100,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"成本\",\r\n          dataIndex: \"cost\",\r\n          scopedSlots: { customRender: \"cost\" },\r\n          width: 100,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"库存\",\r\n          dataIndex: \"stock\",\r\n          scopedSlots: { customRender: \"stock\" },\r\n          width: 100,\r\n          align: \"center\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  watch: {\r\n    \"formData.standardsList\": {\r\n      handler(val, oldVal) {\r\n        console.log(\"formData.standardsList----------changed\", val);\r\n        this.formData.goodsList = this.getSkuList(val);\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n  created() {},\r\n  methods: {\r\n    // 添加规格\r\n    addStandards() {\r\n      let newStandard = {\r\n        name: \"\",\r\n        children: [{ name: \"\" }, { name: \"\" }],\r\n      };\r\n      let canAdd = true;\r\n      this.formData.standardsList.forEach((item) => {\r\n        if (!item.name) {\r\n          canAdd = false;\r\n        }\r\n        if (item.children) {\r\n          item.children.forEach((item1) => {\r\n            if (!item1.name) {\r\n              canAdd = false;\r\n            }\r\n          });\r\n        }\r\n      });\r\n      if (!canAdd) {\r\n        this.$message.error(\"请先完成已添加的规格后再操作\");\r\n        return;\r\n      }\r\n\r\n      if (this.formData.standardsList.length < 4) {\r\n        this.formData.standardsList.push(newStandard);\r\n      } else {\r\n        this.$message.error(\"最多添加4个规格\");\r\n      }\r\n    },\r\n    // 删除规格值\r\n    deleteStandard(index) {\r\n      this.formData.standardsList = this.formData.standardsList.filter(\r\n        (item, ind) => {\r\n          return index !== ind;\r\n        }\r\n      );\r\n    },\r\n    // 添加规格值\r\n    addStandardChild(obj) {\r\n      console.log(obj);\r\n      let child = { name: \"\" };\r\n      if (obj.children.length < 4) {\r\n        obj.children.push(child);\r\n      } else {\r\n        this.$message.error(\"最多添加4个规格值\");\r\n      }\r\n    },\r\n    // 删除规格值\r\n    deleteStandardValue(index, childIndex) {\r\n      this.formData.standardsList[index].children = this.formData.standardsList[\r\n        index\r\n      ].children.filter((item, ind) => {\r\n        return ind !== childIndex;\r\n      });\r\n    },\r\n    // // 规格名失去焦点做检验重复校验\r\n    // standardBlur(name) {\r\n    //   console.log(name);\r\n    // },\r\n    // //规格值失去焦点检验重复校验\r\n    // standardValueBlur(name, list) {\r\n    //   console.log(name, list);\r\n    // },\r\n    // 重名校验\r\n    validateName(rule, value, callback, name, index, list) {\r\n      // console.log(name, list);\r\n      let flag = true;\r\n      list.forEach((item, ind) => {\r\n        if (index !== ind && item.name === name) {\r\n          flag = false;\r\n        }\r\n      });\r\n      if (flag) {\r\n        callback();\r\n      } else {\r\n        callback(\"规格名重复请重新输入\");\r\n      }\r\n    },\r\n    // sku算法获取商品列表\r\n    getSkuList(standardsList) {\r\n      let standardsValueList = standardsList.map((item) => {\r\n        let valueList = item.children.map((child) => {\r\n          return child.name;\r\n        });\r\n        return valueList;\r\n      });\r\n      // console.log('--------规格值二位数组', standardsValueList);\r\n      let skuValueList = standardsValueList.reduce(\r\n        (a, b) => {\r\n          let res = [];\r\n          a.forEach((item) => {\r\n            b.forEach((item1) => {\r\n              res.push(item.concat([item1]));\r\n            });\r\n          });\r\n          return res;\r\n        },\r\n        [[]]\r\n      );\r\n      // console.log('---------sku所有情况的skuValueList', skuValueList)\r\n      let skuList = [];\r\n      skuList = skuValueList.map((item, index) => {\r\n        let obj = {};\r\n        item.forEach((item1, index1) => {\r\n          obj[standardsList[index1].name] = item1;\r\n        });\r\n        return {\r\n          ...obj,\r\n          price: 0.01,\r\n          cost: 0.01,\r\n          stock: 99,\r\n        };\r\n      });\r\n      console.log(\"---------最终的skuList\", skuList);\r\n      this.setColumns(standardsValueList);\r\n      return skuList;\r\n    },\r\n    // 根据最新的规格名渲染table列\r\n    setColumns(standardsValueList) {\r\n      let spanArr = standardsValueList.map((item, index) => {\r\n        let number = 1;\r\n        let arr = standardsValueList.slice(index);\r\n        arr.forEach((child) => {\r\n          number *= child.length;\r\n        });\r\n        return number;\r\n      });\r\n      console.log(\r\n        \"--------规格值二位数组\",\r\n        standardsValueList,\r\n        \"--------spanArr数组\",\r\n        spanArr\r\n      );\r\n      let frontColumns = this.formData.standardsList.map((item, index) => {\r\n        let rowSpan = spanArr[index + 1];\r\n        if (rowSpan != undefined) {\r\n          return {\r\n            title: item.name,\r\n            dataIndex: index,\r\n            width: 100,\r\n            align: \"center\",\r\n            customRender: (text, row, index1) => {\r\n              console.log(index1 % rowSpan);\r\n              return {\r\n                children: <span>{row[item.name]}</span>,\r\n                attrs: {\r\n                  rowSpan: index1 % rowSpan === 0 ? rowSpan : 0,\r\n                },\r\n              };\r\n            },\r\n          };\r\n        } else {\r\n          return {\r\n            title: item.name,\r\n            dataIndex: index,\r\n            width: 100,\r\n            align: \"center\",\r\n            customRender: (text, row, index1) => {\r\n              return {\r\n                children: <span>{row[item.name]}</span>,\r\n              };\r\n            },\r\n          };\r\n        }\r\n      });\r\n      let endColumns = [\r\n        {\r\n          title: \"现价\",\r\n          dataIndex: \"price\",\r\n          scopedSlots: { customRender: \"price\" },\r\n          width: 100,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"成本\",\r\n          dataIndex: \"cost\",\r\n          scopedSlots: { customRender: \"cost\" },\r\n          width: 100,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"库存\",\r\n          dataIndex: \"stock\",\r\n          scopedSlots: { customRender: \"stock\" },\r\n          width: 100,\r\n          align: \"center\",\r\n        },\r\n      ];\r\n\r\n      this.columns = frontColumns.concat(endColumns);\r\n    },\r\n    // 保存\r\n    save() {\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          console.log(\"---------------formData\", this.formData, JSON.stringify(this.formData));\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n.sku {\r\n  background: #fff;\r\n  height: calc(100vh - 80px);\r\n  padding: 10px;\r\n  position: relative;\r\n  overflow: auto;\r\n  .standard-list {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    .standard {\r\n      background: #f1f2f5;\r\n      width: 47%;\r\n      padding: 20px;\r\n      margin-bottom: 20px;\r\n      margin-right: 3%;\r\n      position: relative;\r\n    }\r\n  }\r\n  .goods {\r\n    margin-top: 20px;\r\n  }\r\n}\r\n</style>\r\n<style lang=\"less\">\r\n.sku {\r\n  .goods {\r\n    .ant-form-item {\r\n      margin: 0;\r\n      display: flex;\r\n      justify-content: center;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e99d427c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=e99d427c&lang=less&scoped=true&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e99d427c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=less&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=less&\"","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=e99d427c&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=e99d427c&lang=less&scoped=true&\""],"sourceRoot":""}