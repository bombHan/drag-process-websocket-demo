(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ddaeb52"],{"56bb1":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"process"},[i("div",{staticClass:"left"},[i("tree",{attrs:{process:t.process},on:{addCondition:t.addCondition,addChildNode:t.addChildNode,addChildNodeEnd:t.addChildNodeEnd,deleteCondition:t.deleteCondition,deleteChildNode:t.deleteChildNode,clickItem:t.clickItem}})],1),t.visible?i("drawer",{attrs:{visible:t.visible,formData:t.formData,formDataParentConditions:t.formDataParentConditions},on:{save:t.saveFormData,close:t.closeDrawer}}):t._e(),i("a-button",{staticStyle:{position:"absolute",top:"-50px",right:"200px","z-index":"9"},attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)},n=[],s=(i("5ab2"),i("e10e"),i("13c1")),d=(i("6d57"),i("c904"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tree-wrap"},[t.process.type&&"end"!==t.process.type?i("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",background:"#fff"}},[i("div",{staticClass:"tree-item"},["originator"===t.process.type?i("div",{staticStyle:{position:"absolute",left:"0",top:"0px",width:"100%",background:"#fff","z-index":"999",height:"40px"}}):t._e(),i("div",{staticClass:"tree-item-border"}),i("div",{staticClass:"tree-item-content",on:{click:function(e){return t.clickItem(t.process)}}},["originator"!==t.process.type?i("a-icon",{staticClass:"tree-item-content-close",staticStyle:{color:"#fff"},attrs:{type:"close"},on:{click:function(e){return e.stopPropagation(),t.deleteChildNode(t.process,t.parent)}}}):t._e(),i("div",{staticClass:"tree-item-content-title",staticStyle:{color:"#fff"},style:"originator"===t.process.type?"background:#576a95":"approval"===t.process.type?"background:#ff943e;":"background:#3296fa"},[t._v(t._s(t.process.title))]),i("div",{staticClass:"tree-item-content-content"},[t.process.content?i("div",[t._v(t._s(t.process.content))]):i("div",{staticStyle:{color:"#999"}},[t._v("请设置")])])],1)]),i("div",{staticClass:"add-button"},[i("a-popover",{attrs:{title:null,trigger:"click",placement:"bottom",getPopupContainer:function(t){return t.parentNode}}},[i("template",{slot:"content"},[i("div",{staticClass:"add-node"},[i("div",{staticClass:"add-node-item",on:{click:function(e){return t.addChildNode(t.process,"CCperson")}}},[t._v("添加抄送人")]),i("div",{staticClass:"add-node-item",on:{click:function(e){return t.addChildNode(t.process,"approval")}}},[t._v("添加审批人")]),i("div",{staticClass:"add-node-item",on:{click:function(e){return t.addChildNode(t.process,"condition")}}},[t._v("添加条件")])])]),i("a-icon",{staticClass:"plus",attrs:{type:"plus-circle"}})],2),i("div",{staticClass:"tree-item-border"})],1)]):t._e(),t.process.conditions&&t.process.conditions.length>0?i("div",{staticClass:"tree"},[i("div",{staticClass:"addcondition-button",on:{click:function(e){return t.addCondition(t.process)}}},[t._v("添加条件")]),t._l(t.process.conditions,(function(e,o){return i("div",{key:o,staticStyle:{display:"flex","flex-direction":"column","align-items":"center",position:"relative"}},[i("div",{staticClass:"tree-item"},[i("div",{staticClass:"tree-item-border"}),i("div",{staticClass:"tree-item-content",on:{click:function(i){return t.clickItem(e,t.process)}}},[i("a-icon",{staticClass:"tree-item-content-close",attrs:{type:"close"},on:{click:function(e){return e.stopPropagation(),t.deleteCondition(o,t.process,t.parent)}}}),i("div",{staticClass:"tree-item-content-title"},[i("div",{staticStyle:{width:"110px","text-align":"left","word-break":"break-all"}},[t._v(t._s(e.title))]),i("span",{staticStyle:{color:"#999"}},[t._v("优先级"+t._s(e.sort+1))])]),i("div",{staticClass:"tree-item-content-content"},[e.content?i("div",[t._v(t._s(e.content))]):i("div",{staticStyle:{color:"#999"}},[t._v("请设置")])])],1)]),i("div",{staticClass:"add-button"},[i("a-popover",{attrs:{title:null,trigger:"click",placement:"bottom",getPopupContainer:function(t){return t.parentNode}}},[i("template",{slot:"content"},[i("div",{staticClass:"add-node"},[i("div",{staticClass:"add-node-item",on:{click:function(i){return t.addChildNodeEnd(e,"CCperson")}}},[t._v("添加抄送人")]),i("div",{staticClass:"add-node-item",on:{click:function(i){return t.addChildNodeEnd(e,"approval")}}},[t._v("添加审批人")]),i("div",{staticClass:"add-node-item",on:{click:function(i){return t.addChildNodeEnd(e,"condition")}}},[t._v("添加条件")])])]),i("a-icon",{staticClass:"plus",attrs:{type:"plus-circle"}})],2),i("div",{staticClass:"tree-item-border"})],1),e.childNode?i("tree",{attrs:{process:e.childNode,parent:e},on:{addCondition:t.addCondition,addChildNode:t.addChildNode,addChildNodeEnd:t.addChildNodeEnd,deleteCondition:t.deleteCondition,deleteChildNode:t.deleteChildNode,clickItem:t.clickItem}}):t._e(),i("div",{staticClass:"condition-vertival"}),0===o?i("div",{staticClass:"border-bottom-right"}):o===t.process.conditions.length-1?i("div",{staticClass:"border-bottom-left"}):i("div",{staticClass:"border-bottom-whole"}),0===o?i("div",{staticClass:"border-top-right"}):o===t.process.conditions.length-1?i("div",{staticClass:"border-top-left"}):i("div",{staticClass:"border-top-whole"})],1)}))],2):t._e(),t.process.conditions&&t.process.conditions.length>0?i("div",{staticClass:"add-button"},[i("a-popover",{attrs:{title:null,trigger:"click",placement:"bottom",getPopupContainer:function(t){return t.parentNode}}},[i("template",{slot:"content"},[i("div",{staticClass:"add-node"},[i("div",{staticClass:"add-node-item",on:{click:function(e){return t.addChildNodeEnd(t.process,"CCperson")}}},[t._v("添加抄送人")]),i("div",{staticClass:"add-node-item",on:{click:function(e){return t.addChildNodeEnd(t.process,"approval")}}},[t._v("添加审批人")]),i("div",{staticClass:"add-node-item",on:{click:function(e){return t.addChildNodeEnd(t.process,"condition")}}},[t._v("添加条件")])])]),i("a-icon",{staticClass:"plus",attrs:{type:"plus-circle"}})],2),i("div",{staticClass:"tree-item-border"})],1):t._e(),t.process.childNode?i("tree",{attrs:{process:t.process.childNode,parent:t.process},on:{addCondition:t.addCondition,addChildNode:t.addChildNode,addChildNodeEnd:t.addChildNodeEnd,deleteCondition:t.deleteCondition,deleteChildNode:t.deleteChildNode,clickItem:t.clickItem}}):t._e(),"end"===t.process.type?i("div",{staticClass:"end-item"},[t._v("流程结束")]):t._e()],1)}),c=[],r={name:"tree",props:{process:{type:Object,default:function(){return{}},required:!0},parent:{type:Object,default:function(){return{}},required:!1}},data:function(){return{}},methods:{addChildNode:function(t,e){this.$emit("addChildNode",t,e)},addCondition:function(t){this.$emit("addCondition",t)},addChildNodeEnd:function(t,e){this.$emit("addChildNodeEnd",t,e)},deleteChildNode:function(t,e){this.$emit("deleteChildNode",t,e)},deleteCondition:function(t,e,i){this.$emit("deleteCondition",t,e,i)},clickItem:function(t,e){this.$emit("clickItem",t,e)}}},a=r,l=(i("dca1"),i("9ca4")),p=Object(l["a"])(a,d,c,!1,null,"292f5b9c",null),u=p.exports,h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-drawer",{attrs:{placement:"right",closable:!1,maskClosable:!1,visible:t.visible,width:"500px"},on:{close:t.close}},[i("div",{attrs:{slot:"title"},slot:"title"},[i("a-form-model",{ref:"form",attrs:{model:t.editData,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[i("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},["originator"===t.editData.type?i("div",[t._v("\n          "+t._s(t.editData.title)+"\n        ")]):i("a-form-model-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"title",rules:{required:!0,message:"请输入"}}},[i("a-input",{staticStyle:{width:"300px"},model:{value:t.editData.title,callback:function(e){t.$set(t.editData,"title",e)},expression:"editData.title"}})],1),"condition"===t.editData.type?i("a-form-model-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"sort"}},[i("a-select",{staticStyle:{width:"90px"},model:{value:t.editData.sort,callback:function(e){t.$set(t.editData,"sort",e)},expression:"editData.sort"}},t._l(t.formDataParentConditions,(function(e,o){return i("a-select-option",{key:o,attrs:{value:o}},[t._v("优先级"+t._s(o+1))])})),1)],1):t._e()],1)])],1),"condition"===t.editData.type?i("div",[t._v("\n    条件内容\n  ")]):i("div",[t._v("\n    节点内容\n  ")]),i("div",{staticStyle:{display:"flex","flex-direction":"row-reverse"}},[i("a-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),i("a-button",{staticStyle:{"margin-right":"20px"},on:{click:t.close}},[t._v("取消")])],1)])},f=[],v={props:{visible:{type:Boolean,default:!1,required:!0},formData:{type:Object,default:function(){return{}},required:!0},formDataParentConditions:{type:Array,default:function(){return[]},required:!1}},data:function(){return{labelCol:{span:4},wrapperCol:{span:20},editData:{},originSort:void 0}},created:function(){console.log(this.formData),this.editData=JSON.parse(JSON.stringify(this.formData)),this.originSort=JSON.parse(JSON.stringify(this.formData)).sort},methods:{save:function(){this.originSort>-1?this.$emit("save",this.editData,this.originSort):this.$emit("save",this.editData)},close:function(){this.$emit("close")}}},C=v,m=Object(l["a"])(C,h,f,!1,null,"1bc7b5da",null),b=m.exports;function N(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?N(Object(i),!0).forEach((function(e){Object(s["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var g={components:{Tree:u,drawer:b},data:function(){return{visible:!1,formData:{},formDataParentConditions:[],currentProcess:{},process:{title:"发起人",content:"所有人",type:"originator",childNode:{conditions:[{title:"条件1",content:[{id:"componentId1"}],sort:0,type:"condition",childNode:{title:"222",content:"222",type:"approval"}},{title:"条件2",content:[{id:"componentId1"}],type:"condition",sort:1}],childNode:{title:"222",content:"222",type:"approval",childNode:{type:"end"}}}}}},methods:{clickItem:function(t,e){console.log(t,e),this.formData=JSON.parse(JSON.stringify(t)),e&&(this.formDataParentConditions=e.conditions),this.currentProcess=t,this.visible=!0},closeDrawer:function(){this.visible=!1},saveFormData:function(t,e){console.log(t,e,this.currentProcess),"condition"!==this.currentProcess.type?this.currentProcess=Object.assign(this.currentProcess,t):(this.currentProcess=Object.assign(this.currentProcess,t),this.formDataParentConditions.splice(e,1),this.formDataParentConditions.splice(this.currentProcess.sort,0,this.currentProcess),this.formDataParentConditions.forEach((function(t,e){t.sort=e})),console.log(this.formDataParentConditions)),this.closeDrawer()},addCondition:function(t){var e=t.conditions.length;t.conditions.push({title:"条件".concat(e+1),content:"",sort:e,type:"condition"})},deleteCondition:function(t,e,i){console.log("--删除所在位置--",t,"删除对象所在的对象节点",e,"删除对象所在的对象节点的父对象",i),e.conditions.length<3?e.content?delete e.conditions:i.childNode=e.childNode:(e.conditions.splice(t,1),e.conditions=e.conditions.map((function(t,e){return y(y({},t),{},{sort:e})}))),this.process=JSON.parse(JSON.stringify(this.process)),console.log(this.process)},addChildNode:function(t,e){var i=JSON.parse(JSON.stringify(t));"condition"===e?t.childNode={conditions:[{title:"条件1",content:"",sort:0,type:"condition"},{title:"条件2",content:"",sort:1,type:"condition"}],childNode:y({},i.childNode)}:(delete t.conditions,t.childNode={title:"approval"===e?"审批人":"抄送人",type:e,content:"",childNode:i.childNode,conditions:i.conditions}),this.process=JSON.parse(JSON.stringify(this.process)),console.log(t,this.process)},addChildNodeEnd:function(t,e){var i=JSON.parse(JSON.stringify(t.childNode||{}));console.log(i,e),t.childNode="condition"===e?{conditions:[{title:"条件1",content:"",sort:0},{title:"条件2",content:"",sort:1}],childNode:y({},i)}:{title:"approval"===e?"审批人":"抄送人",type:e,content:"",childNode:y({},i)},this.process=JSON.parse(JSON.stringify(this.process)),console.log(t,this.process)},deleteChildNode:function(t,e){t.conditions&&t.conditions.length>0?(e.childNode={conditions:t.conditions,childNode:t.childNode},console.log(e.childNode)):e.childNode=t.childNode,this.process=JSON.parse(JSON.stringify(this.process)),console.log(this.process)},save:function(){console.log(this.process)}}},_=g,k=(i("e8bf"),Object(l["a"])(_,o,n,!1,null,"770fc97b",null));e["default"]=k.exports},"5dd4":function(t,e,i){},cac9:function(t,e,i){},dca1:function(t,e,i){"use strict";var o=i("5dd4"),n=i.n(o);n.a},e8bf:function(t,e,i){"use strict";var o=i("cac9"),n=i.n(o);n.a}}]);
//# sourceMappingURL=chunk-4ddaeb52.965c9c7a.js.map